<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>IPCAS 视觉与注意课题组 在线被试库</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- <div class="bg-orbit"></div> -->
    <header class="site-header">
      <div>
        <p class="eyebrow">中国科学院心理研究所 IPCAS</p>
        <h1>视觉与注意课题组 在线被试库</h1>
        <p class="subtitle">
          注册、登录、完善信息并进行实验报名。您的个人信息将用于科研参与管理与安全合规目的。
        </p>
      </div>
      <div class="logo-bar">
        <div class="logo-square left-logo"><img src="assets/IPCAS_logo.png" alt="IPCAS" /></div>
        <div class="logo-square right-logo"><img src="assets/V&A_logo.png" alt="Lab" /></div>
      </div>
    </header>

    <main>
      <section class="card" id="auth">
        <div class="card-header">
          <h2>欢迎加入被试库</h2>
        </div>

        <div class="tab-row">
          <button class="tab active" data-tab="register">注册</button>
          <button class="tab" data-tab="login">登录</button>
        </div>

        <div class="tab-panel active" id="tab-register">
          <form id="registerForm" class="form-grid">
            <label>
              姓名
              <input name="name" required />
            </label>
            <label>
              密码
              <input name="password" type="password" minlength="6" required />
            </label>
            <label>
              性别
              <select name="gender" required>
                <option value="">请选择</option>
                <option value="男">男</option>
                <option value="女">女</option>
                <option value="其他">其他</option>
              </select>
            </label>
            <label>
              所在单位
              <input name="unit" required />
            </label>
            <label>
              身份证号
              <input name="idcard" required />
            </label>
            <label>
              收款支付宝绑定手机号
              <input name="alipay_phone" required />
            </label>
            <label class="consent">
              <input type="checkbox" name="consent" required /><span>我已阅读并同意《信息收集与使用告知》</span>
            </label>
            <button type="submit" class="primary">提交注册</button>
          </form>
          <p class="form-note" id="registerStatus"></p>
        </div>

        <div class="tab-panel" id="tab-login">
          <form id="loginForm" class="form-grid">
            <label>
              唯一 ID (U000001)
              <input name="user_uid" />
            </label>
            <label>
              或身份证号
              <input name="idcard" />
            </label>
            <label>
              密码
              <input name="password" type="password" required />
            </label>
            <button type="submit" class="primary">登录</button>
          </form>
          <p class="form-note" id="loginStatus"></p>
        </div>
      </section>

      <section class="card hidden" id="profile">
        <div class="card-header">
          <h2>个人主页</h2>
          <p>登录后可更新信息并报名实验。</p>
        </div>
        <div id="profileEmpty" class="empty-state">
          <p>请先登录以查看个人信息。</p>
        </div>
        <div id="profileArea" class="hidden">
          <div class="profile-summary">
            <div>
              <p class="eyebrow">当前登录</p>
              <h3 id="profileName"></h3>
              <p id="profileUid"></p>
              <p id="profileMeta"></p>
            </div>
            <button id="logoutBtn" class="ghost">退出登录</button>
          </div>

          <div class="split">
            <form id="profileForm" class="form-grid">
              <h4>更新个人信息</h4>
              <label>
                微信号
                <input name="wechat" />
              </label>
              <label>
                所在地区
                <input name="region" />
              </label>
              <label>
                左/右利手
                <select name="handedness">
                  <option value="">请选择</option>
                  <option value="左利手">左利手</option>
                  <option value="右利手">右利手</option>
                  <option value="双利手">双利手</option>
                </select>
              </label>
              <label>
                左眼近视度数
                <input name="left_myopia" />
              </label>
              <label>
                右眼近视度数
                <input name="right_myopia" />
              </label>
              <label>
                是否有金属植入物
                <select name="metal_implant">
                  <option value="">请选择</option>
                  <option value="无">无</option>
                  <option value="有">有</option>
                </select>
              </label>
              <label>
                是否幽闭恐惧
                <select name="claustrophobia">
                  <option value="">请选择</option>
                  <option value="无">无</option>
                  <option value="有">有</option>
                </select>
              </label>
              <label>
                民族
                <input name="ethnicity" />
              </label>
              <label>
                受教育年限
                <input name="education_years" />
              </label>
              <label>
                身高 (cm)
                <input name="height_cm" />
              </label>
              <label>
                体重 (kg)
                <input name="weight_kg" />
              </label>
              <label>
                头围 (cm)
                <input name="head_circumference_cm" />
              </label>
              <button type="submit" class="primary">保存更新</button>
              <p class="form-note" id="profileStatus"></p>
            </form>

            <form id="experimentForm" class="form-grid">
              <h4>实验报名</h4>
              <label>
                实验类型
                <input name="experiment_type" required />
              </label>
              <label>
                实验编号
                <input name="experiment_id" required />
              </label>
              <button type="submit" class="primary">提交报名</button>
              <p class="form-note" id="experimentStatus"></p>
            </form>
          </div>
        </div>
      </section>

      <section class="card consent" id="consent">
        <h2>信息收集与使用告知</h2>
        <p>
          我们将收集您在注册与实验报名过程中提交的身份信息、联系方式及相关背景资料，用于科研被试管理、资格核验、
          参与记录、报酬结算与安全合规目的。我们仅在实现上述目的的最小范围内处理您的信息，并采取加密、权限控制等措施保护。
        </p>
        <p>
          您有权查询、更正或补充您的个人信息，也可以申请删除或限制处理。若您撤回同意，可能影响后续实验参与及报酬结算。
          我们不会向无关第三方披露您的敏感信息，依法需要提供或经您授权的情形除外。
        </p>
        <p>
          您提交信息即表示已阅读并理解本告知内容，并同意我们按照告知范围处理您的个人信息。若不同意，请勿继续提交注册。
        </p>
      </section>
    </main>

    <footer class="site-footer">
      <p>IPCAS 视觉与注意课题组 · 在线被试库</p>
    </footer>

    <script src="app.js"></script>
  </body>
</html>
